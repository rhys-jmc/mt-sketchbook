(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,n){e.exports=n(29)},19:function(e,t,n){},21:function(e,t,n){},23:function(e,t,n){},25:function(e,t,n){},27:function(e,t,n){},29:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(11),r=n.n(c),i=n(9),l=n(12),s=n(7),u=n(6),d=n(1),g=n(2),p=n(4),h=n(3),f=n(5),v=n(8),m=n.n(v),b=window,k=b.innerWidth,w=b.innerHeight,C=k-226,E=C<320,M=E?k-32-8:C,y=E?w-208:w-116,P=function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(n=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(c)))).state={drawing:!1},n.canvasRef=o.a.createRef(),n.getCanvasContext=function(){return n.canvasRef.current&&n.canvasRef.current.getContext("2d")},n.blockScrolling=function(e){e.preventDefault()},n.startScrollingBlock=function(){document.addEventListener("touchstart",n.blockScrolling,{passive:!1}),document.addEventListener("touchmove",n.blockScrolling,{passive:!1})},n.stopScrollingBlock=function(){document.removeEventListener("touchstart",n.blockScrolling),document.removeEventListener("touchmove",n.blockScrolling)},n.handleStart=function(e){var t=e.pageX,a=e.pageY,o=n.currentCanvasRef,c=o.offsetLeft,r=o.offsetTop,i=n.getCanvasContext();i&&n.setState({drawing:!0},function(){i.beginPath(),i.moveTo(t-c,a-r)})},n.handleMove=function(e){var t=e.pageX,a=e.pageY;if(n.state.drawing){var o=n.currentCanvasRef,c=o.offsetLeft,r=o.offsetTop,i=n.getCanvasContext();i&&(i.lineTo(t-c,a-r),i.stroke())}},n.handleEnd=function(){n.setState({drawing:!1},function(){var e=n.getCanvasContext();e&&(e.closePath(),n.props.onMouseUp(e.getImageData(0,0,M,y)))})},n.handleMouseDown=function(e){var t=e.pageX,a=e.pageY;return n.handleStart({pageX:t,pageY:a})},n.handleMouseMove=function(e){var t=e.pageX,a=e.pageY;return n.handleMove({pageX:t,pageY:a})},n.handleMouseUp=function(){return n.handleEnd()},n.handleTouchStart=function(e){var t=e.touches[0],a=t.pageX,o=t.pageY;return n.startScrollingBlock(),n.handleStart({pageX:a,pageY:o})},n.handleTouchMove=function(e){var t=e.touches[0],a=t.pageX,o=t.pageY;return n.handleMove({pageX:a,pageY:o})},n.handleTouchEnd=function(){n.stopScrollingBlock(),n.handleEnd()},n}return Object(f.a)(t,e),Object(g.a)(t,[{key:"shouldComponentUpdate",value:function(e){var t=e.imageData;return this.props.imageData!==t}},{key:"render",value:function(){var e=this.getCanvasContext();return e&&e.putImageData(this.props.imageData,0,0),o.a.createElement("canvas",{width:M,height:y,ref:this.canvasRef,onMouseDown:this.handleMouseDown,onMouseMove:this.handleMouseMove,onMouseUp:this.handleMouseUp,onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove,onTouchEnd:this.handleTouchEnd})}},{key:"currentCanvasRef",get:function(){return this.canvasRef.current||{width:0,height:0,offsetLeft:0,offsetTop:0}}}]),t}(a.Component),S=(n(19),function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).state={open:!1},n.handleKeyUp=function(e){"Escape"===e.key&&n.closeModal()},n.closeModal=function(){n.setState({open:!1})},n.openModal=function(e){n.setState({open:!0},e)},n}return Object(f.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keyup",this.handleKeyUp)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keyup",this.handleKeyUp)}},{key:"render",value:function(){var e=this,t=this.closeModal,n=this.openModal;return o.a.createElement(o.a.Fragment,null,this.props.render({closeModal:t,openModal:n}),this.state.open&&o.a.createElement("div",{className:"ModalBackground",style:open?{}:{display:"none"},onClick:function(){return e.closeModal()}},o.a.createElement("div",{className:"Modal",onClick:function(e){e.stopPropagation()}},this.props.children({closeModal:t,openModal:n}))))}}]),t}(a.Component)),j=(n(21),function(e){var t=e.isActive,n=e.label,a=e.onClick;return o.a.createElement("li",{className:"PageListItem"},o.a.createElement("button",{className:m()("ItemButton",t&&"ItemButtonActive"),onClick:a,disabled:t},n))}),O=(n(23),function(e){var t=e.activePageId,n=e.onPageClick,a=e.pages;return o.a.createElement("ul",{className:"PageList"},a.map(function(e){var a=e.id,c=e.label;return o.a.createElement(j,{key:a,isActive:a===t,label:c,onClick:n(a)})}))}),D=(n(25),function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(n=Object(p.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(c)))).state={newPage:"",pages:[]},n.inputRef=o.a.createRef(),n.handleChange=function(e){return function(t){var a=t.target.value;n.setState(function(t){return Object(u.a)({},t,Object(s.a)({},e,a))})}},n.handleMouseUp=function(e){n.setState(function(t){var n=t.pages,a=Object(l.a)(t,["pages"]);if("undefined"!==typeof a.activePageId){var o=a.activePageId,c=Object(u.a)({},n[o],{imageData:e}),r=[].concat(Object(i.a)(n.slice(0,o)),[c],Object(i.a)(n.slice(o+1)));return Object(u.a)({},a,{pages:r})}return Object(u.a)({pages:n},a)})},n.handleNewPageClick=function(e){return function(){e(function(){n.inputRef.current&&n.inputRef.current.focus()})}},n.handlePageClick=function(e){return function(){n.setState({activePageId:e})}},n.handleSubmit=function(e){return function(t){t.preventDefault(),n.setState(function(e){var t=e.pages[e.pages.length-1],n={id:t?t.id+1:0,imageData:new ImageData(M,y),label:e.newPage};return{newPage:"",pages:[].concat(Object(i.a)(e.pages),[n])}},function(){e(),n.handlePageClick(n.state.pages.slice(-1)[0].id)()})}},n}return Object(f.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement("h1",null,"Sketchbook"),o.a.createElement("div",{className:"Container",style:{flexDirection:E?"column":"row",alignItems:E?"center":"flex-start"}},o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement(S,{render:function(t){var n=t.openModal;return o.a.createElement("button",{className:m()("btn","large",!e.state.pages.length&&"primary"),onClick:e.handleNewPageClick(n)},"+ New Page")}},function(t){var n=t.closeModal,a=e.handleSubmit(n);return o.a.createElement("form",{className:"Form",onSubmit:a},o.a.createElement("label",{htmlFor:"page-name"},"Let's give your page a name"),o.a.createElement("input",{autoComplete:"off",name:"page-name",id:"page-name",type:"text",value:e.state.newPage,onChange:e.handleChange("newPage"),ref:e.inputRef,pattern:e.state.pages.length?"^(?:(?!(^".concat(e.state.pages.map(function(e){return e.label}).join("$)|(^"),"$)).)*$"):void 0,required:!0}),o.a.createElement("button",{className:"large primary",type:"submit"},"Create New Page"))})),"undefined"!==typeof this.state.activePageId&&o.a.createElement("div",null,o.a.createElement(O,{pages:this.state.pages,activePageId:this.state.activePageId,onPageClick:this.handlePageClick}))),"undefined"!==typeof this.state.activePageId&&o.a.createElement(P,{imageData:this.state.pages[this.state.activePageId].imageData,onMouseUp:this.handleMouseUp})))}}]),t}(a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(27);r.a.render(o.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[13,2,1]]]);
//# sourceMappingURL=main.81cf51e9.chunk.js.map